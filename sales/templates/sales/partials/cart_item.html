<tr class="cart-row align-middle">
    <td style="width: 45%;">
        <div class="fw-bold text-dark small">{{ product.name }}</div>
        <input type="hidden" name="product_ids[]" value="{{ product.id }}">
    </td>
    
    <td style="width: 20%;">
        <input type="number" 
               name="quantities[]" 
               value="1" 
               min="1" 
               max="{{ product.quantity }}" 
               class="form-control form-control-sm shadow-sm" 
               style="width: 70px;"
               data-price="{{ product.selling_price }}"
               oninput="updateRow(this)">
    </td>

    <td class="text-end fw-bold text-dark" style="width: 30%;">
        <span class="line-total-display">{{ product.selling_price }}</span> F
        <input type="hidden" class="line-total-hidden" value="{{ product.selling_price }}">
    </td>

    <td class="text-end" style="width: 5%;">
        <button type="button" class="btn btn-link text-danger p-0" onclick="this.closest('tr').remove(); calculateGrandTotal();">
            <i class="fas fa-trash-alt"></i>
        </button>
    </td>
</tr>

<script>
    // Force le calcul d√®s l'ajout au panier
    calculateGrandTotal();
</script>