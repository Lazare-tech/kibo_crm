<div class="modal fade show" id="salePreviewModal" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-dark text-white">
                <h5 class="modal-title fw-bold">Confirmation de vente</h5>
                <button type="button" class="btn-close btn-close-white" onclick="document.getElementById('modal-container').innerHTML=''"></button>
            </div>
            <div class="modal-body p-4">
                <div class="mb-3 text-center">
                    <h6 class="text-muted text-uppercase small">Client</h6>
                    <p class="fw-bold">{{ client.first_name }} {{ client.last_name }}</p>
                </div>
                
                <table class="table table-sm border-bottom">
                    {% for item in items %}
                    <tr>
                        <td>{{ item.product.name }} (x{{ item.qty }})</td>
                        <td class="text-end fw-bold">{{ item.total }} F</td>
                    </tr>
                    {% endfor %}
                </table>

                <div class="bg-light p-3 rounded-3 mt-3">
                    <div class="d-flex justify-content-between mb-2">
                        <span>Total Facture :</span>
                        <span class="fw-bold text-dark">{{ total_amount }} F</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Montant Reçu :</span>
                        <span class="text-success fw-bold">{{ amount_paid }} F</span>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between">
                        <span class="fw-bold">{% if balance >= 0 %}Monnaie à rendre :{% else %}Créance :{% endif %}</span>
                        <h4 class="fw-bold {% if balance >= 0 %}text-primary{% else %}text-danger{% endif %}">
                            {{ balance|abs }} F
                        </h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer border-0 p-3">
                <button type="button" class="btn btn-light rounded-pill px-4" onclick="document.getElementById('modal-container').innerHTML=''">Annuler</button>
                
                <button type="submit" form="pos-form" class="btn btn-primary rounded-pill px-4 fw-bold">
                    CONFIRMER & IMPRIMER
                </button>
            </div>
        </div>
    </div>
</div>